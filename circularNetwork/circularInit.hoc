load_file("nrngui.hoc")
objref NULL

objref ShapeWindow
proc shape(){
     ShapeWindow = new PlotShape()
     ShapeWindow.show(0)
     //ShapeWindow.exec_menu("Shape Plot")
     //ShapeWindow.variable("IAF.m")
     fast_flush_list.append(ShapeWindow)
}
//----------------------------------------------------------------------------
// Tylko jednen zestaw stałych powinien być odkomentowany
//----------------------------------------------------------------------------
xopen("constants.hoc")
//xopen("noise.hoc")
// xopen("period_constants.hoc")
//xopen("prolonged_short_input.hoc")

//----------------------------------------------------------------------------
xopen("addGraphs.hoc")
xopen("neuronIAF.hoc")
xopen("createNetworkCells.hoc")
xopen("createConnections.hoc")
xopen("networkRasterGraph.hoc")
xopen("counter.hoc")

//----------------------------------------------------------------------------
// dodatkowe wykresy
//----------------------------------------------------------------------------

shape()
addgraph("neurons[12].IAF.M", -1, 1)
addgraph("neurons[random_inhibitory_cell_id].IAF.M", -1, 1)

//----------------------------------------------------------------------------
// procedura go
//----------------------------------------------------------------------------
proc go() {
    init()
    run()
    idvec.mark(rasterGraph, timevec, "|")
    ivec.mark(rasterGraph, tvec, "S")
    countSpikes()
    if (PRINT_INPUT_RASTER_GRAPH) {idvecIN.mark(rasterGraphIN, timevecIN, "|")}
    printf("%d\n\n", prob.discunif(1, 1000))
}

// od razu uruchamiamy go()
nrncontrolmenu()
go()
